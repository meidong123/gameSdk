<style>*{margin:0;padding:0}.container{height:800px;width:100%;padding:15px}.container .left{float:left}.container .right{float:left}.container .mid{float:left;margin-left:20px;margin-right:20px;background-color:#eee;display:inline-block;width:600px;height:802px}#mobile{width:480px;height:800px;margin:auto;border:1px solid #000;background-color:#eee}#mobile::-webkit-scrollbar{display:none}#editorView::-webkit-scrollbar{display:none}#page_property{width:200px;border-radius:5px;padding:5px;border:1px solid #000}#page_component{width:180px;height:130px;padding:5px;margin-top:20px;border-radius:5px;border:1px solid #000}.container .right .button_area{width:250px;height:30px}.button_area .button{float:left;width:110px;height:30px;margin-left:10px;border-radius:5px;line-height:30px;text-align:center;border:2px solid #4682b4}.button_upload{width:90px;height:25px;margin-left:10px;border-radius:4px;line-height:25px;text-align:center;margin-top:10px;font-size:12px;color:#1e90ff;border:1px solid #1e90ff}.container .right .property_edit{width:250px;height:360px;margin-top:20px;border-radius:5px;border:1px solid #000}.font1{font-size:14px;line-height:14px;display:block;margin-top:5px;font-family:宋体}.font2{font-size:14px;line-height:28px;display:block;margin-left:20px;width:90px;text-align:center;border-bottom:2px solid red}.font3{display:block;margin-top:10px;margin-left:10px;float:left;height:20px;text-align:center;line-height:20px;font-size:14px}.inputSize{float:left;font-size:14px;line-height:20px;display:block;width:50px;height:20px;margin-left:10px;margin-top:10px;border-radius:5px;text-align:center;border:1px solid #4682b4}.item_group{float:left;margin-top:10px;width:52px;text-align:center}.item_solid{height:50px;width:50px;border:1px solid #000}.item_dashed{height:50px;width:50px;border:1px dashed #000}</style><script type="text/javascript">function onstart(e,t){e.dataTransfer.setData("type",t),e.dataTransfer.setData("disX",e.offsetX),e.dataTransfer.setData("disY",e.offsetY)}function doubleClick(e){document.getElementById("editorView").buildNewView(e)}function preview(){log.i("预览")}function save(){document.getElementById("editorView").buildHtmlForMobile()}function uploadImage(){var e="img/00"+parseInt(6*Math.random()+1)+".jpg",t=document.getElementById("viewId").value;document.getElementById(t).setImage(e)}function getValue(){var e=document.getElementsByName("action_type");for(i=0;i<e.length;i++)if(e[i].checked)return e[i].value}function actionTextChange(e){var t=document.getElementById("viewId").value,n=document.getElementById(t);n.actionText=e,n.actionType=getValue()}function changeAction(e){var t=document.getElementById("actionText"),n=document.getElementById("viewId").value,o=document.getElementById(n);o.actionType==e?t.value=o.actionText:t.value="",t.placeholder=3==e?"请输入电话号码":2==e?"请输入资源ID":"请输入链接地址"}function onSizeChange(){var e=document.getElementById("viewId").value,t=document.getElementById("mask_width").value,n=document.getElementById("mask_height").value;document.getElementById(e).setSize(t,n)}function titleChange(e){document.getElementById("page_title").innerHTML=e}function initialization(){var e=document.getElementById("mobile"),t=new EditorView(480,736);t.id="editorView",t.setOnClickListerner(function(e,t){if(0==t)document.getElementById("image_property").style.display="block",document.getElementById("mask_property").style.display="none",document.getElementById("viewId").value=e;else if(1==t){document.getElementById("image_property").style.display="none",document.getElementById("mask_property").style.display="block",document.getElementById("viewId").value=e;var n=document.getElementById(e);document.getElementById("mask_width").value=parseInt(n.style.width),document.getElementById("mask_height").value=parseInt(n.style.height);var o=n.actionType;o||(o=1),document.getElementById("input_action"+o).checked="checked",changeAction(o)}}),e.append(t),document.onmousedown=function(e){t.doMouseDown(e)},document.onmousemove=function(e){t.doMouseMove(e)},document.onmouseup=function(e){t.doMouseUp(e)}}</script><div class="container mb50"><div class="left"><div id="page_property"><div class="form-group"><label>页面标题</label> <input type="text" class="form-control" autocomplete="off" name="pageTitle" ng-model="title" placeholder="请输入页面标题"></div><div class="form-group"><label>页面描述</label> <textarea class="form-control" rows="3" autocomplete="off" ng-model="page_desc" placeholder="描述"></textarea></div><div class="form-group"><label>列表图片：</label><div><div class="site-demo-upbar"><div class="layui-box layui-upload-button"><form target="layui-upload-iframe" method="post" key="set-mine" enctype="multipart/form-data" id="list_pic"><input type="file" name="filedata" class="layui-upload-file" id="sel_list_pic"></form><span class="layui-upload-icon"><i class="layui-icon"></i>本地上传</span></div></div><img style="max-width:160px" ng-src="{{picture?IP+picture:'images/none.png'}}"></div></div><div class="form-group"><label>活动有效时间</label><div class="input-group"><div class="input-group-addon">起</div><input type="text" class="form-control" readonly="readonly" ng-model="start_time" id="start_time" placeholder="请选择"></div></div><div class="form-group"><div class="input-group"><div class="input-group-addon">止</div><input type="text" class="form-control" readonly="readonly" ng-model="end_time" id="end_time" placeholder="请选择"></div></div></div><div id="page_component"><h1 class="font1" style="margin-top:10px">组件:</h1><div class="item_group"><div draggable="true" class="item_solid" ondragstart="onstart(event,0)" ondblclick="doubleClick(0)"></div><h1 class="font1">底板</h1></div><div class="item_group" style="margin-left:20px"><div draggable="true" class="item_dashed" ondragstart="onstart(event,1)" ondblclick="doubleClick(1)"></div><h1 class="font1">热区</h1></div></div></div><div class="mid" style="box-shadow:0 2px 5px #888"><div id="mobile" style="box-shadow:0 2px 5px #888"><div style="border-bottom:1px solid #888;width:100%;height:64px;background-color:#fff;box-shadow:0 2px 3px #888"><h1 style="margin:0;display:block;float:left;width:64px;height:64px;line-height:64px">〈</h1><h1 id="page_title" style="margin:0;text-align:center;display:block;float:left;width:352px;height:64px;line-height:64px">{{title}}</h1></div></div></div><div class="right"><div class="button_area"><button class="btn btn-primary" ng-click="preview()">预览</button> <button class="btn btn-primary" ng-click="save()">保存</button></div><div class="property_edit"><input id="viewId" hidden type="text"><h2 class="font2">组件属性</h2><div id="image_property" style="display:none"><h1 class="font1" style="margin-left:10px;margin-top:10px">背景图片：</h1><div class="site-demo-upbar"><div class="layui-box layui-upload-button"><form target="layui-upload-iframe" method="post" key="set-mine" enctype="multipart/form-data" id="activity_bg"><input type="file" name="filedata" class="layui-upload-file" id="sel_activity_bg"></form><span class="layui-upload-icon"><i class="layui-icon"></i>本地上传</span></div></div></div><div id="mask_property" style="display:none"><h1 class="font1" style="margin-left:10px">热区尺寸：</h1><div style="display:inline-block"><input id="mask_width" class="inputSize" name="mask_width" onchange="onSizeChange()"><p class="font3">X</p><input id="mask_height" class="inputSize" name="mask_height" onchange="onSizeChange()"></div><h1 class="font1" style="margin-left:10px">链接设置：</h1><input id="input_action1" onclick="changeAction(this.value)" name="action_type" checked="checked" style="margin-left:10px;height:12px" selected="selected" type="radio" value="1"><span style="font-size:12px">链接地址</span> <input id="input_action2" onclick="changeAction(this.value)" name="action_type" style="height:12px" type="radio" value="2"><span style="font-size:12px">链接资源</span> <input id="input_action3" onclick="changeAction(this.value)" name="action_type" style="height:12px" type="radio" value="3"><span style="font-size:12px">拨打电话</span> <input id="actionText" class="form-control" name="pageTitle" placeholder="请输入链接地址" onchange="actionTextChange(this.value)"></div></div></div></div>