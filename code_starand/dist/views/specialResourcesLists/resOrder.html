<style>.bg-danger{background-color:#d9534f!important}</style><ul class="breadcrumb"><li><i class="icon-home home-icon"></i> <a href="#/home">主页</a></li><li class="active">资源订单管理</li></ul><div class="col-sm-2"><p class="text-danger">待处理事项<span class="badge bg-danger m-l" ng-bind="backLog"></span></p><div class="list-group no-radius alt"><a class="list-group-item" href="javascript:;" ng-click="selectState(2,0)"><span class="badge bg-danger" ng-bind="hasPayCount"></span> <i class="fa fa-comment fa-fw text-muted"></i> 已支付订单 </a><a class="list-group-item" href="javascript:;" ng-click="selectState(6,0)"><span class="badge bg-danger" ng-bind="backMoneyCount"></span> <i class="fa fa-envelope fa-fw text-muted"></i> 退款申请 </a><a class="list-group-item" href="javascript:;" ng-click="selectState(1,0)"><span class="badge bg-danger" ng-bind="waitPay"></span> <i class="fa fa-eye fa-fw text-muted"></i> 待支付订单</a></div></div><div class="col-xs-12 mb50"><form class="form-inline m-b"><div class="form-group m-r-sm"><select class="form-control" ng-model="province_id" ng-change="changeProvince()"><option value="">请选择省份</option><option value="{{item.id}}" ng-repeat="item in province_list">{{item.name}}</option></select></div><div class="form-group m-r-sm"><select class="form-control" ng-model="city_id" ng-change="changeCity()"><option value="">请选择市</option><option value="{{item.id}}" ng-repeat="item in city_list">{{item.name}}</option></select></div><div class="form-group m-r-sm"><select class="form-control" ng-model="area_id"><option value="">请选择区/县</option><option value="{{item.id}}" ng-repeat="item in county_list">{{item.name}}</option></select></div><div class="form-group m-r-sm"><select class="form-control" ng-model="brand_id" ng-change="changeBrand()"><option value="">请选择品牌</option><option value="{{item.id}}" ng-repeat="item in brand_list">{{item.name}}</option></select></div><div class="form-group m-r-sm"><select class="form-control" ng-model="sub_brand_id" ng-change="changeSubBrand()"><option value="">请选择车系</option><option value="{{item.id}}" ng-repeat="item in sub_brand_list">{{item.name}}</option></select></div><div class="form-group m-r-sm"><select class="form-control" ng-model="model_id"><option value="">请选择车型</option><option value="{{item.id}}" ng-repeat="item in model_list">{{item.name}}</option></select></div><div class="form-group m-r-sm"><select class="form-control" ng-model="state"><option value="">全部</option><option value="2,0">已支付</option><option value="1,0">未支付</option><option value="0,-2">已失效</option><option value="6,0">申请退款</option><option value="0,-1">已退款</option><option value="8,0">拒绝退款</option><option value="0,1">已完成</option></select></div><div class="form-group m-r-sm"><input type="text" ng-model="start_time" class="form-control" id="start_time" placeholder="请选择起始日期" readonly="readonly"></div><div class="form-group m-r-sm"><input type="text" ng-model="end_time" class="form-control" id="end_time" placeholder="请选择结束日期" readonly="readonly"></div><div class="form-group m-r-sm"><input type="text" class="form-control" ng-model="user_mobile" placeholder="请输入电话号码"></div><button type="button" class="btn btn-primary m-l-sm" ng-click="search()">确定</button></form><div><h4 class="page-tit">订单列表 <label class="label bg-success pull-right">导出excel</label></h4><div class="table-responsive"><table class="table table-bordered dataList hover"><thead><tr><th>订单编号</th><th>品牌名称</th><th>车系名称</th><th>下单时间</th><th>申请用户</th><th>区域</th><th>开票价</th><th>成交价</th><th>定金</th><th>订单状态</th><th>操作</th></tr></thead><tbody><tr ng-click="jump('/home/cms/specialResOrderDetail/'+item.orderId)" ng-repeat="item in orderData"><td ng-bind="item.orderCode"></td><td ng-bind="item.brandName"></td><td ng-bind="item.modelName"></td><td ng-bind="item.createTime"></td><td ng-bind="item.iBDName"></td><td ng-bind="item.saleArea"></td><td ng-bind="item.facePrice "></td><td ng-bind="item.finalPrice"></td><td ng-bind="item.intentionPirce"></td><td ng-bind="item.state"></td><td><button ng-if="(item.orderState == 1 && item.orderFinishState == 0)
                                || (item.orderState == 3 && item.orderFinishState == 0)
                                || (item.orderState == 2 && item.orderFinishState == 0)
                                || (item.orderState == 0 && item.orderFinishState == -2)" class="btn btn-sm btn-primary" ng-click="edit($event);$event.stopPropagation();">编辑</button> <button ng-if="(item.orderState == 1 && item.orderFinishState == 0)" class="btn btn-sm btn-warning" ng-click="tip(item.orderId);$event.stopPropagation();">提醒</button> <button ng-if="(item.orderState == 1 && item.orderFinishState == 0)
                                || (item.orderState == 0 && item.orderFinishState == -2)
                                || (item.orderState == 0 && item.orderFinishState == -1)
                                || (item.orderState == 0 && item.orderFinishState == 1)" class="btn btn-sm btn-danger" ng-click="delOrder(item.orderId);$event.stopPropagation();">删除</button> <button ng-if="(item.orderState == 2 && item.orderFinishState == 0)" class="btn btn-sm btn-success" ng-click="hasPay(item.orderId);$event.stopPropagation();">已支付店面</button> <button ng-if="(item.orderState == 3 && item.orderFinishState == 0)" class="btn btn-sm btn-dark btn-disabled" ng-click="$event.stopPropagation();">已支付店面</button> <button ng-if="(item.orderState == 2 && item.orderFinishState == 0) || (item.orderState == 3 && item.orderFinishState == 0)" class="btn btn-sm btn-warning" ng-click="showModal('fund',item.orderId);$event.stopPropagation();">退款</button> <button ng-if="(item.orderState == 2 && item.orderFinishState == 0) || (item.orderState == 3 && item.orderFinishState == 0)" class="btn btn-sm btn-info" ng-click="end(item.orderId);$event.stopPropagation();">完成</button> <button ng-if="(item.orderState == 6 && item.orderFinishState == 0)
                                || (item.orderState == 8 && item.orderFinishState == 0)" class="btn btn-sm btn-warning" ng-click="agreeRefund(item.orderId);$event.stopPropagation();">同意退款</button> <button ng-if="(item.orderState == 6 && item.orderFinishState == 0)
                                || (item.orderState == 8 && item.orderFinishState == 0)" class="btn btn-sm btn-primary" ng-click="showModal('rejectFund',item.orderId);$event.stopPropagation();">拒绝退款</button> <button ng-if="(item.orderState == 0 && item.orderFinishState == -1)
                                || (item.orderState == 0 && item.orderFinishState == 1)" class="btn btn-sm btn-warning" ng-click="$event.stopPropagation();">重新下单</button></td></tr></tbody></table></div><div class="page" ck-page></div></div></div><div class="modal fade" tabindex="-1" role="dialog" id="fund"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">发起退款</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label class="col-sm-3 control-label">原因说明：</label><div class="col-sm-9"><textarea ng-model="remark" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="原因说明" rows="3" style="resize:none"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" ng-click="calloff()">取消</button> <button type="button" class="btn btn-primary" ng-click="refund()">确定</button></div></div></div></div><div class="modal fade" tabindex="-1" role="dialog" id="rejectFund"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">拒绝退款</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label class="col-sm-3 control-label">原因说明：</label><div class="col-sm-9"><textarea ng-model="remark" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="原因说明" rows="3" style="resize:none"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" ng-click="calloff()">取消</button> <button type="button" class="btn btn-primary" ng-click="rejectRefund()">确定</button></div></div></div></div>